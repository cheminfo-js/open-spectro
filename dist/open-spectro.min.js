!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.openSpectro=e():r.openSpectro=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p="",e(0)}([function(r,e,t){"use strict";var n=t(1),o=t(2),a=t(3),i=t(5),s=t(4),u=t(6),l=t(8);r.exports.wavelengthTocolor=n,r.exports.parse=o,r.exports.process=a,r.exports.getAnnotations=i,r.exports.Util=s,r.exports.getChart=u,r.exports.getTabDelimited=l},function(r,e){"use strict";r.exports=function(r){var e,t,n,o;return r>=380&&440>r?(e=-1*(r-440)/60,t=0,n=1):r>=440&&490>r?(e=0,t=(r-440)/50,n=1):r>=490&&510>r?(e=0,t=1,n=-1*(r-510)/20):r>=510&&580>r?(e=(r-510)/70,t=1,n=0):r>=580&&645>r?(e=1,t=-1*(r-645)/65,n=0):r>=645&&780>=r?(e=1,t=0,n=0):(e=0,t=0,n=0),o=r>780||380>r?0:r>700?(780-r)/80:420>r?(r-380)/40:1,{color:"rgba("+100*e+"%,"+100*t+"%,"+100*n+"%, "+o+")",red:e,green:t,blue:n,alpha:o}}},function(r,e,t){"use strict";function n(r,e){for(var t=new Array(r.length),n=0;n<r.length;n++)t[n]=-Math.log10(r[n]/e[n]);return t}function o(r,e){for(var t=new Array(r.length),n=0;n<r.length;n++)t[n]=r[n]/e[n]*100;return t}function a(r){for(var e=[],t=0,n=0;n<r.length;n++)for(var o=(r[n],r[n].split(/( ?(?=[a-zA-Z%])| +(?=[^a-zA-Z%]))/)),a=0;a<o.length;a++){var i=o[a];if(i.trim().length>0){if(i.match(/^[j-rJ-R%]/)){var s=i.substring(0,1),u=h.indexOf(s)-9;t+=u+i.substr(1)>>0}else t=o[a]>>0;e.push(t)}}return e}function i(r){var e={},t=r.split(",");e.type=t[0];for(var n=1;n<t.length;n++){var o=t[n],a=o.replace(/^([A-Z]*)(.*)$/,"$1"),i=o.replace(/^([A-Z]*)(.*)$/,"$2");switch(a){case"I":e.intensity=i>>0,e.percentIntensity=Math.round((i>>0)/256*100);break;case"RGB":var s=i.split("/");e.redPoint=s[0]>>0,e.greenPoint=s[1]>>0,e.bluePoint=s[2]>>0;break;case"REF":var s=i.split("/");e.nMRed=s[0]>>0,e.nMGreen=s[1]>>0,e.nMBlue=s[2]>>0;break;case"BG":var s=i.split("/");e.backgroundMin=s[0]>>0,e.backgroundMax=s[1]>>0;break;default:e[a]=i}}return e}function s(r){for(var e={},t=0;t<r.length;t++){var n=r[t];e[n.type]=n}return e}function u(r,e){var e=e||{};for(var t in r){var n=r[t];n.name=e.name}}function l(r){if(r.Z&&r.E){var e=JSON.parse(JSON.stringify(r.Z));e.type="A",e.y=n(r.E.y,r.Z.y),r.A=e;var t=JSON.parse(JSON.stringify(r.Z));t.type="T",t.y=o(r.E.y,r.Z.y),r.T=t}}function f(r){for(var e in r){var t=r[e];t.tab=v.toXY(t)}}function c(r){for(var e in r){var t=r[e],n=t.redPoint-t.bluePoint,o=(t.nMRed-t.nMBlue)/(n-1),a=t.y.length,i=t.nMBlue-t.bluePoint*o,s=t.nMRed+(a-t.redPoint)*o;t.x=[];for(var u=0;a>u;u++){var l=i+(s-i)/(a-1)*u;t.x.push(l)}}}var p=t(3),v=t(4),h=["r","q","p","o","n","m","l","k","j","%","J","K","L","M","N","O","P","Q","R"];r.exports=function(r,e){if(!r)return[];var e=Object.create(e||{});e.name=e.name||"";for(var t=r.split(/[\r\n]*>/m),n=[],o=0;o<t.length;o++){var v=t[o],h=[],y=v.split(/[\r\n]+/),x=y[0];if(x&&x.match(/^[A-Z]/)){var h=i(x);h.y=a(y.slice(1)),n.push(h)}}var d=s(n);return l(d),u(d,e),p(d,e),c(d),f(d),d}},function(r,e){"use strict";function t(r,e){for(var t=[],n=r.y,o=Math.floor(e/2),a=o;a<n.length-o-1;a++){for(var i=0,s=a-o;a-o+e>s;s++)i+=n[s];t.push(i/e)}r.y=t,r.redPoint-=o,r.bluePoint-=o,r.greenPoint-=o}function n(r){for(var e=r.y,t=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0;o<e.length;o++)e[o]<t&&(t=e[o]),e[o]>n&&(n=e[o]);if(t!=n)for(var o=0;o<e.length;o++)e[o]=(e[o]-t)/(n-t);else for(var o=0;o<e.length;o++)e[o]=.5;r.y=e}r.exports=function(r,e){var e=Object.create(e||{});for(var o in r)e.smooth&&t(r[o],e.smooth),e.normalize&&n(r[o])}},function(r,e){"use strict";r.exports.toXY=function(r){for(var e=r.x,t=r.y,n=[],o=0;o<e.length;o++)n.push(e[o]+"	"+t[o]);return n.join("\r\n")},r.exports.toArray=function(r){var e=[];for(var t in r)e.push(r[t]);return e}},function(r,e,t){"use strict";function n(r,e,t){return{fillColor:e,type:"rect",position:[{y:"0px",x:r+2},{y:t+"px",x:r-1}],strokeWidth:0}}var o=t(1);r.exports=function(r){if(r){var e=[];e.push(n(r.nMRed,"red",15)),e.push(n(r.nMBlue,"blue",15)),e.push(n(r.nMGreen,"green",15));for(var t=r.x,a=0;a<t.length;a++){var i=o(t[a]).color;e.push(n(t[a],i,10))}return e}}},function(r,e,t){"use strict";var n=t(7);r.exports=function(r,e,t){var e=e||"RGBWT";Array.isArray(r)||(r=[r]);for(var o={type:"chart",value:{title:"Open Spectrophotometer results",axis:[{label:"nM"},{label:"Y axis"}],data:[]}},a=0,i=0;i<r.length;i++)if(void 0===t||t===i){var s=r[i];for(var u in s)if(e.indexOf(u)>-1){var l=s[u];o.value.data.push({x:l.x,y:l.y,label:++a+". "+n[u].label+(l.name?": "+l.name:"")+(l.concentration?" ("+l.name+")":""),xAxis:0,yAxis:1,lineWidth:2,color:"red"})}}return o}},function(r,e){"use strict";r.exports={R:{label:"red",yUnit:"relative"},G:{label:"green",yUnit:"relative"},B:{label:"blue",yUnit:"relative"},W:{label:"white",yUnit:"relative"},Z:{label:"background",yUnit:"relative"},E:{label:"experimental",yUnit:"relative"},A:{label:"absorbance",yUnit:"(%)"},T:{label:"transmittance",yUnit:"(%)"}}},function(r,e){"use strict";function t(r,e){headers[0].push(r.info.name),headers[1].push(r.info.concentration),headers[2].push(r.info.comment),headers[3].push(e)}function n(){var r=[];return r[0]=[],r[1]=[],r[2]=[],r[3]=[],r}r.exports=function(r,e,o){var e=e||"RGBWT";Array.isArray(r)||(r=[r]);for(var a=n(),i=[],s=0;s<r.length;s++)if(void 0===o||o===s){var u=r[s];t(u,"X");for(var l=u[Object.keys(u)[0]],f=0;f<l.x.length;f++)i[f]||(i[f]=[]),i[f].push(l.x[f]);for(var c in u)if(e.indexOf(c)>-1){t(u,c);for(var l=u[c],f=0;f<l.y.length;f++)i[f].push(l.y[f])}}for(var p=[],s=0;s<a.length;s++){var v=a[s];p.push(v.join("	"))}for(var s=0;s<i.length;s++){var h=i[s];p.push(h.join("	"))}var y=p.join("\r");return y}}])});
//# sourceMappingURL=open-spectro.min.js.map