!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.openSpectro=e():r.openSpectro=e()}(this,function(){return function(r){function e(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return r[t].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=r,e.c=n,e.p="",e(0)}([function(r,e,n){"use strict";var t=n(1),o=n(2),i=n(3),a=n(5),l=n(4),c=n(6),f=n(8),s=n(9);r.exports.wavelengthTocolor=t,r.exports.parse=o,r.exports.process=i,r.exports.getAnnotations=a,r.exports.Util=l,r.exports.getChart=c,r.exports.getTabDelimited=f,r.exports.load=s},function(r,e){"use strict";r.exports=function(r){var e,n,t,o;return r>=380&&440>r?(e=-1*(r-440)/60,n=0,t=1):r>=440&&490>r?(e=0,n=(r-440)/50,t=1):r>=490&&510>r?(e=0,n=1,t=-1*(r-510)/20):r>=510&&580>r?(e=(r-510)/70,n=1,t=0):r>=580&&645>r?(e=1,n=-1*(r-645)/65,t=0):r>=645&&780>=r?(e=1,n=0,t=0):(e=0,n=0,t=0),o=r>780||380>r?0:r>700?(780-r)/80:420>r?(r-380)/40:1,{color:"rgba("+100*e+"%,"+100*n+"%,"+100*t+"%, "+o+")",red:e,green:n,blue:t,alpha:o}}},function(r,e,n){"use strict";function t(r,e){for(var n=new Array(r.length),t=0;t<r.length;t++)n[t]=-Math.log10(r[t]/e[t]);return n}function o(r,e){for(var n=new Array(r.length),t=0;t<r.length;t++)n[t]=r[t]/e[t]*100;return n}function i(r){for(var e=[],n=0,t=0;t<r.length;t++)for(var o=(r[t],r[t].split(/( ?(?=[a-zA-Z%])| +(?=[^a-zA-Z%]))/)),i=0;i<o.length;i++){var a=o[i];if(a.trim().length>0){if(a.match(/^[j-rJ-R%]/)){var l=a.substring(0,1),c=h.indexOf(l)-9;n+=c+a.substr(1)>>0}else n=o[i]>>0;e.push(n)}}return e}function a(r){var e={},n=r.split(",");e.type=n[0];for(var t=1;t<n.length;t++){var o=n[t],i=o.replace(/^([A-Z]*)(.*)$/,"$1"),a=o.replace(/^([A-Z]*)(.*)$/,"$2");switch(i){case"I":e.intensity=a>>0,e.percentIntensity=Math.round((a>>0)/256*100);break;case"RGB":var l=a.split("/");e.redPoint=l[0]>>0,e.greenPoint=l[1]>>0,e.bluePoint=l[2]>>0;break;case"REF":var l=a.split("/");e.nMRed=l[0]>>0,e.nMGreen=l[1]>>0,e.nMBlue=l[2]>>0;break;case"BG":var l=a.split("/");e.backgroundMin=l[0]>>0,e.backgroundMax=l[1]>>0;break;default:e[i]=a}}return e}function l(r){for(var e={},n=0;n<r.length;n++){var t=r[n];e[t.type]=t}return e}function c(r,e){var e=e||{};for(var n in r){var t=r[n];Object.keys(e).forEach(function(r){t.info=t.info||{},"data"!==r&&(t.info[r]=e[r])})}}function f(r){if(r.Z&&r.E){var e=JSON.parse(JSON.stringify(r.Z));e.type="A",e.y=t(r.E.y,r.Z.y),r.A=e;var n=JSON.parse(JSON.stringify(r.Z));n.type="T",n.y=o(r.E.y,r.Z.y),r.T=n}}function s(r){for(var e in r){var n=r[e];n.tab=v.toXY(n)}}function u(r){for(var e in r){var n=r[e],t=n.redPoint-n.bluePoint,o=(n.nMRed-n.nMBlue)/(t-1),i=n.y.length,a=n.nMBlue-n.bluePoint*o,l=n.nMRed+(i-n.redPoint)*o;n.x=[];for(var c=0;i>c;c++){var f=a+(l-a)/(i-1)*c;n.x.push(f)}}}var p=n(3),v=n(4),h=["r","q","p","o","n","m","l","k","j","%","J","K","L","M","N","O","P","Q","R"];r.exports=function(r,e){if(!r)return[];for(var e=Object.create(e||{}),n=r.split(/[\r\n]*>/m),t=[],o=0;o<n.length;o++){var v=n[o],h=[],y=v.split(/[\r\n]+/),x=y[0];if(x&&x.match(/^[A-Z]/)){var h=a(x);h.y=i(y.slice(1)),t.push(h)}}var b=l(t);return f(b),c(b,e.info),p(b,e),u(b),s(b),b}},function(r,e){"use strict";function n(r,e){for(var n=[],t=r.y,o=Math.floor(e/2),i=o;i<t.length-o-1;i++){for(var a=0,l=i-o;i-o+e>l;l++)a+=t[l];n.push(a/e)}r.y=n,r.redPoint-=o,r.bluePoint-=o,r.greenPoint-=o}function t(r){for(var e=r.y,n=Number.MAX_VALUE,t=Number.MIN_VALUE,o=0;o<e.length;o++)e[o]<n&&(n=e[o]),e[o]>t&&(t=e[o]);if(n!=t)for(var o=0;o<e.length;o++)e[o]=(e[o]-n)/(t-n);else for(var o=0;o<e.length;o++)e[o]=.5;r.y=e}r.exports=function(r,e){var e=Object.create(e||{});for(var o in r)e.smooth&&n(r[o],e.smooth),e.normalize&&t(r[o])}},function(r,e){"use strict";r.exports.toXY=function(r){for(var e=r.x,n=r.y,t=[],o=0;o<e.length;o++)t.push(e[o]+"	"+n[o]);return t.join("\r\n")},r.exports.toArray=function(r){var e=[];for(var n in r)e.push(r[n]);return e}},function(r,e,n){"use strict";function t(r,e,n){return{fillColor:e,type:"rect",position:[{y:"0px",x:r+2},{y:n+"px",x:r-1}],strokeWidth:1e-4}}var o=n(1);r.exports=function(r){if(r){var e=[];e.push(t(r.nMRed,"red",15)),e.push(t(r.nMBlue,"blue",15)),e.push(t(r.nMGreen,"green",15));for(var n=r.x,i=0;i<n.length;i++){var a=o(n[i]).color;e.push(t(n[i],a,10))}return e}}},function(r,e,n){"use strict";var t=n(7);r.exports=function(r,e){var e=e||{},n=e.channels||"RGBWT",o=e.index;Array.isArray(r)||(r=[r]);var i="Y axis";1===n.length&&(i=t[n].label+"("+t[n].yUnit+")");var a={title:"Open Spectrophotometer results",axis:[{label:"Wavelength (nm)"},{label:i}],data:[]},l=!1,c=!1,f=!1,s=1===n.length?!1:!0;r.forEach(function(r){r.info=r.info||{}});for(var u=1;u<r.length;u++)r[0].info.concentration!==r[u].info.concentration&&(c=!0),r[0].info.name!==r[u].info.name&&(l=!0),r[0].info.comment!==r[u].info.comment&&(f=!0);for(var u=0;u<r.length;u++)if(void 0===o||o===u){var p=r[u];for(var v in p)if(n.indexOf(v)>-1){var h=p[v],y="";l&&(y+=h.info.name),c&&(y+=l?" ("+h.info.concentration+")":h.info.concentration),f&&(y&&(y+=" "),y+=h.info.comment),s&&(y&&(y+=" "),y+=v),a.data.push({x:h.x,y:h.y,label:y,xAxis:0,yAxis:1,defaultStyle:{lineColor:t[v].color,lineWidth:2}})}}return{type:"chart",value:a}}},function(r,e){"use strict";r.exports={R:{label:"red",yUnit:"relative",color:"red"},G:{label:"green",yUnit:"relative",color:"green"},B:{label:"blue",yUnit:"relative",color:"blue"},W:{label:"white",yUnit:"relative",color:"black"},Z:{label:"background",yUnit:"relative",color:"grey"},E:{label:"experimental",yUnit:"relative",color:"black"},A:{label:"absorbance",yUnit:"(%)",color:"black"},T:{label:"transmittance",yUnit:"(%)",color:"black"}}},function(r,e){"use strict";function n(r,e){t[0].push(r.info.name),t[1].push(r.info.concentration),t[2].push(r.info.comment),t[3].push(e)}var t=[];t[0]=[],t[1]=[],t[2]=[],t[3]=[],r.exports=function(r,e,o){var e=e||"RGBWT";Array.isArray(r)||(r=[r]);for(var i=[],a=0;a<r.length;a++)if(void 0===o||o===a){var l=r[a];n(l,"X");for(var c=l[Object.keys(l)[0]],f=0;f<c.x.length;f++)i[f]||(i[f]=[]),i[f].push(c.x[f].toPrecision(4));for(var s in l)if(e.indexOf(s)>-1){n(l,s);for(var c=l[s],f=0;f<c.y.length;f++)i[f].push(c.y[f].toPrecision(4))}}for(var u=[],a=0;a<t.length;a++){var p=t[a];u.push(p.join("	"))}for(var a=0;a<i.length;a++){var v=i[a];u.push(v.join("	"))}var h=u.join("\r\n");return h}},function(r,e,n){"use strict";var t=n(2);r.exports=function(r,e){var e=Object.create(e||{}),n=[];return r.forEach(function(r){e.info=r;var o=t(r.data,e);n.push(o)}),n}}])});
//# sourceMappingURL=open-spectro.min.js.map