!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.openSpectro=e():r.openSpectro=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p="",e(0)}([function(r,e,t){"use strict";var n=t(1),o=t(2),a=t(3),i=t(5),l=t(4),s=t(6),u=t(8),c=t(9);r.exports.wavelengthTocolor=n,r.exports.parse=o,r.exports.process=a,r.exports.getAnnotations=i,r.exports.Util=l,r.exports.getChart=s,r.exports.getTabDelimited=u,r.exports.load=c},function(r,e){"use strict";r.exports=function(r){var e,t,n,o;return r>=380&&440>r?(e=-1*(r-440)/60,t=0,n=1):r>=440&&490>r?(e=0,t=(r-440)/50,n=1):r>=490&&510>r?(e=0,t=1,n=-1*(r-510)/20):r>=510&&580>r?(e=(r-510)/70,t=1,n=0):r>=580&&645>r?(e=1,t=-1*(r-645)/65,n=0):r>=645&&780>=r?(e=1,t=0,n=0):(e=0,t=0,n=0),o=r>780||380>r?0:r>700?(780-r)/80:420>r?(r-380)/40:1,{color:"rgba("+100*e+"%,"+100*t+"%,"+100*n+"%, "+o+")",red:e,green:t,blue:n,alpha:o}}},function(r,e,t){"use strict";function n(r,e){for(var t=new Array(r.length),n=0;n<r.length;n++)t[n]=-Math.log10(r[n]/e[n]);return t}function o(r,e){for(var t=new Array(r.length),n=0;n<r.length;n++)t[n]=r[n]/e[n]*100;return t}function a(r){for(var e=[],t=0,n=0;n<r.length;n++)for(var o=(r[n],r[n].split(/( ?(?=[a-zA-Z%])| +(?=[^a-zA-Z%]))/)),a=0;a<o.length;a++){var i=o[a];if(i.trim().length>0){if(i.match(/^[j-rJ-R%]/)){var l=i.substring(0,1),s=h.indexOf(l)-9;t+=s+i.substr(1)>>0}else t=o[a]>>0;e.push(t)}}return e}function i(r){var e={},t=r.split(",");e.type=t[0];for(var n=1;n<t.length;n++){var o=t[n],a=o.replace(/^([A-Z]*)(.*)$/,"$1"),i=o.replace(/^([A-Z]*)(.*)$/,"$2");switch(a){case"I":e.intensity=i>>0,e.percentIntensity=Math.round((i>>0)/256*100);break;case"RGB":var l=i.split("/");e.redPoint=l[0]>>0,e.greenPoint=l[1]>>0,e.bluePoint=l[2]>>0;break;case"REF":var l=i.split("/");e.nMRed=l[0]>>0,e.nMGreen=l[1]>>0,e.nMBlue=l[2]>>0;break;case"BG":var l=i.split("/");e.backgroundMin=l[0]>>0,e.backgroundMax=l[1]>>0;break;default:e[a]=i}}return e}function l(r){for(var e={},t=0;t<r.length;t++){var n=r[t];e[n.type]=n}return e}function s(r,e){var t=t||{};console.log("------");for(var n in r){var o=r[n];for(var a in Object.keys(e))console.log(a),o.info=o.info||{},"data"!==a&&(o.info[a]=e);o.name=t.name}}function u(r){if(r.Z&&r.E){var e=JSON.parse(JSON.stringify(r.Z));e.type="A",e.y=n(r.E.y,r.Z.y),r.A=e;var t=JSON.parse(JSON.stringify(r.Z));t.type="T",t.y=o(r.E.y,r.Z.y),r.T=t}}function c(r){for(var e in r){var t=r[e];t.tab=v.toXY(t)}}function f(r){for(var e in r){var t=r[e],n=t.redPoint-t.bluePoint,o=(t.nMRed-t.nMBlue)/(n-1),a=t.y.length,i=t.nMBlue-t.bluePoint*o,l=t.nMRed+(a-t.redPoint)*o;t.x=[];for(var s=0;a>s;s++){var u=i+(l-i)/(a-1)*s;t.x.push(u)}}}var p=t(3),v=t(4),h=["r","q","p","o","n","m","l","k","j","%","J","K","L","M","N","O","P","Q","R"];r.exports=function(r,e){if(!r)return[];var e=Object.create(e||{});e.name=e.name||"";for(var t=r.split(/[\r\n]*>/m),n=[],o=0;o<t.length;o++){var v=t[o],h=[],y=v.split(/[\r\n]+/),x=y[0];if(x&&x.match(/^[A-Z]/)){var h=i(x);h.y=a(y.slice(1)),n.push(h)}}var b=l(n);return u(b),s(b,e.info),p(b,e),f(b),c(b),b}},function(r,e){"use strict";function t(r,e){for(var t=[],n=r.y,o=Math.floor(e/2),a=o;a<n.length-o-1;a++){for(var i=0,l=a-o;a-o+e>l;l++)i+=n[l];t.push(i/e)}r.y=t,r.redPoint-=o,r.bluePoint-=o,r.greenPoint-=o}function n(r){for(var e=r.y,t=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0;o<e.length;o++)e[o]<t&&(t=e[o]),e[o]>n&&(n=e[o]);if(t!=n)for(var o=0;o<e.length;o++)e[o]=(e[o]-t)/(n-t);else for(var o=0;o<e.length;o++)e[o]=.5;r.y=e}r.exports=function(r,e){var e=Object.create(e||{});for(var o in r)e.smooth&&t(r[o],e.smooth),e.normalize&&n(r[o])}},function(r,e){"use strict";r.exports.toXY=function(r){for(var e=r.x,t=r.y,n=[],o=0;o<e.length;o++)n.push(e[o]+"	"+t[o]);return n.join("\r\n")},r.exports.toArray=function(r){var e=[];for(var t in r)e.push(r[t]);return e}},function(r,e,t){"use strict";function n(r,e,t){return{fillColor:e,type:"rect",position:[{y:"0px",x:r+2},{y:t+"px",x:r-1}],strokeWidth:1e-4}}var o=t(1);r.exports=function(r){if(r){var e=[];e.push(n(r.nMRed,"red",15)),e.push(n(r.nMBlue,"blue",15)),e.push(n(r.nMGreen,"green",15));for(var t=r.x,a=0;a<t.length;a++){var i=o(t[a]).color;e.push(n(t[a],i,10))}return e}}},function(r,e,t){"use strict";var n=t(7);r.exports=function(r,e,t){var e=e||"RGBWT";Array.isArray(r)||(r=[r]);for(var o={type:"chart",value:{title:"Open Spectrophotometer results",axis:[{label:"nm"},{label:"Y axis"}],data:[]}},a=0,i=0;i<r.length;i++)if(void 0===t||t===i){var l=r[i];for(var s in l)if(e.indexOf(s)>-1){var u=l[s];o.value.data.push({x:u.x,y:u.y,label:++a+". "+n[s].label+(u.name?": "+u.name:"")+(u.concentration?" ("+u.name+")":""),xAxis:0,yAxis:1,lineWidth:2,color:n[s].color})}}return o}},function(r,e){"use strict";r.exports={R:{label:"red",yUnit:"relative",color:"red"},G:{label:"green",yUnit:"relative",color:"green"},B:{label:"blue",yUnit:"relative",color:"blue"},W:{label:"white",yUnit:"relative",color:"black"},Z:{label:"background",yUnit:"relative",color:"grey"},E:{label:"experimental",yUnit:"relative",color:"black"},A:{label:"absorbance",yUnit:"(%), color:'black'"},T:{label:"transmittance",yUnit:"(%), color:'black'"}}},function(r,e){"use strict";r.exports=function(r,e,t){function n(r,e,t){r[0].push(e.info.name),r[1].push(e.info.concentration),r[2].push(e.info.comment),r[3].push(t)}var e=e||"RGBWT";Array.isArray(r)||(r=[r]);var o=[],a=[];a[0]=[],a[1]=[],a[2]=[],a[3]=[];for(var i=0;i<r.length;i++)if(void 0===t||t===i){var l=r[i];n(l,"X");for(var s=l[Object.keys(l)[0]],u=0;u<s.x.length;u++)o[u]||(o[u]=[]),o[u].push(s.x[u]);for(var c in l)if(e.indexOf(c)>-1){n(l,c);for(var s=l[c],u=0;u<s.y.length;u++)o[u].push(s.y[u])}}for(var f=[],i=0;i<a.length;i++){var p=a[i];f.push(p.join("	"))}for(var i=0;i<o.length;i++){var v=o[i];f.push(v.join("	"))}var h=f.join("\r");return h}},function(r,e,t){"use strict";var n=t(2);r.exports=function(r,e){var e=Object.create(e||{}),t=[];return r.forEach(function(r){e.info=JSON.parse(JSON.stringify(r));var o=n(r.data,e);t.push(o)}),t}}])});
//# sourceMappingURL=open-spectro.min.js.map