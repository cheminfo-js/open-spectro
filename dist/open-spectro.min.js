!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.openSpectro=e():r.openSpectro=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p="",e(0)}([function(r,e,t){"use strict";var n=t(1),o=t(2),a=t(3),i=t(4),l=t(5),s=t(6);r.exports.wavelengthTocolor=n,r.exports.parse=o,r.exports.process=a,r.exports.annotations=i,r.exports.util=l,r.exports.getChart=s},function(r,e){"use strict";r.exports=function(r){var e,t,n,o;return r>=380&&440>r?(e=-1*(r-440)/60,t=0,n=1):r>=440&&490>r?(e=0,t=(r-440)/50,n=1):r>=490&&510>r?(e=0,t=1,n=-1*(r-510)/20):r>=510&&580>r?(e=(r-510)/70,t=1,n=0):r>=580&&645>r?(e=1,t=-1*(r-645)/65,n=0):r>=645&&780>=r?(e=1,t=0,n=0):(e=0,t=0,n=0),o=r>780||380>r?0:r>700?(780-r)/80:420>r?(r-380)/40:1,{color:"rgba("+100*e+"%,"+100*t+"%,"+100*n+"%, "+o+")",red:e,green:t,blue:n,alpha:o}}},function(r,e,t){"use strict";function n(r,e){for(var t=[],n=0;n<r.length;n++){var o=100*-Math.log10(r[n]/e[n]);t.push(o)}return t}function o(r,e){for(var t=[],n=0;n<r.length;n++){var o=r[n]/e[n]*100;t.push(o)}return t}function a(r){for(var e=[],t=0,n=0;n<r.length;n++)for(var o=(r[n],r[n].split(/( ?(?=[a-zA-Z%])| +(?=[^a-zA-Z%]))/)),a=0;a<o.length;a++){var i=o[a];if(i.trim().length>0){if(i.match(/^[j-rJ-R%]/)){var l=i.substring(0,1),s=c.indexOf(l)-9;t+=s+i.substr(1)>>0}else t=o[a]>>0;e.push(t)}}return e}function i(r){var e={},t=r.split(",");e.type=t[0];for(var n=1;n<t.length;n++){var o=t[n],a=o.replace(/^([A-Z]*)(.*)$/,"$1"),i=o.replace(/^([A-Z]*)(.*)$/,"$2");switch(a){case"I":e.intensity=i>>0,e.percentIntensity=Math.round((i>>0)/256*100);break;case"RGB":var l=i.split("/");e.redPoint=l[0]>>0,e.greenPoint=l[1]>>0,e.bluePoint=l[2]>>0;break;case"BG":var l=i.split("/");e.backgroundMin=l[0]>>0,e.backgroundMax=l[1]>>0;break;default:e[a]=i}}return e}function l(r){for(var e={},t=0;t<r.length;t++){var n=r[t];e[n.type]=n}return e}function s(r,e){var e=e||{};for(var t in r){var n=r[t];n.name=e.name}}function u(r){if(r.Z&&r.E){var e=JSON.parse(JSON.stringify(r.Z));e.type="A",e.y=o(r.E.y,r.Z.y),r.A=e;var t=JSON.parse(JSON.stringify(r.Z));t.type="T",t.y=n(r.E.y,r.Z.y),r.T=t}}function f(r,e){for(var t in r){var n=r[t],o=n.redPoint-n.bluePoint,a=(e.nMred-e.nMblue)/(o-1),i=n.y.length,l=e.nMblue-n.bluePoint*a,s=e.nMred+(i-n.redPoint)*a;n.x=[];for(var u=0;i>u;u++){var f=l+(s-l)/(i-1)*u;n.x.push(f)}}}var p=t(3),c=["r","q","p","o","n","m","l","k","j","%","J","K","L","M","N","O","P","Q","R"];r.exports=function(r,e){for(var t=r.split(/[\r\n]*>/m),n=[],o=0;o<t.length;o++){var c=t[o],v=[],h=c.split(/[\r\n]+/),y=h[0];if(y&&y.match(/^[A-Z]/)){var v=i(y);v.y=a(h.slice(1)),n.push(v)}}var x=l(n);return u(x),s(x,e),p(x,e),f(x,e),x}},function(r,e){"use strict";function t(r,e){for(var t=[],n=r.y,o=Math.floor(e/2),a=o;a<n.length-o-1;a++){for(var i=0,l=a-o;a+o>=l;l++)i+=n[l];t.push(i/e)}r.y=t,r.redPoint-=o,r.bluePoint-=o,r.greenPoint-=o}function n(r){for(var e=r.y,t=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0;o<e.length;o++)e[o]<t&&(t=e[o]),e[o]>n&&(n=e[o]);if(t!=n)for(var o=0;o<e.length;o++)e[o]=(e[o]-t)/(n-t);else for(var o=0;o<e.length;o++)e[o]=.5;r.y=e}r.exports=function(r,e){var e=e||{};for(var o in r)e.smooth&&t(r[o],e.smooth),e.normalize&&n(r[o].data)}},function(r,e,t){"use strict";function n(r,e,t){return{pos2:{y:t+"px",x:r-1},fillColor:e,type:"rect",pos:{y:"0px",x:r+2}}}var o=t(1);r.exports=function(r,e){var t=[];t.push(n(e.nMred,"red",15)),t.push(n(e.nMblue,"blue",15)),t.push(n(e.nMgreen,"green",15));for(var a=r.x,i=0;i<a.length;i++){var l=o(a[i]).color;t.push(n(a[i],l,10))}return t}},function(r,e){"use strict";r.exports.toXY=function(r){for(var e=r.x,t=r.y,n=[],o=0;o<e.length;o++)n.push(e[o]+"	"+t[o]);return n.join("\r\n")}},function(r,e,t){"use strict";var n=t(7);r.exports=function(r,e,t){var e=e||"RGBWZE";Array.isArray(r)||(r=[r]);for(var o={type:"chart",value:{title:"Open Spectrophotometer results",axis:[{label:"nM"},{label:"Y axis"}],data:[]}},a=0;a<r.length;a++)if(void 0===t||t===a){var i=r[a];for(var l in i)if(e.indexOf(l)>-1){var s=i[l];o.value.data.push({x:s.x,y:s.y,label:n[l].label+": "+s.name,xAxis:0,yAxis:1,lineWidth:2,color:"red"})}}return o}},function(r,e){"use strict";r.exports={R:{label:"red",yUnit:"relative"},G:{label:"green",yUnit:"relative"},B:{label:"blue",yUnit:"relative"},W:{label:"white",yUnit:"relative"},Z:{label:"background",yUnit:"relative"},E:{label:"experimental",yUnit:"relative"},A:{label:"absorbance",yUnit:"(%)"},T:{label:"transmittance",yUnit:"(%)"}}}])});
//# sourceMappingURL=open-spectro.min.js.map